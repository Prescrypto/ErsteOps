{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
<div class="container">
	<div style="padding-top:55px">
		<h1> Upload Symptom File</h1>

		{% if messages %}
      <div class="row">
        <ul class="messages">
          {% for message in messages %}
            <div {% if message.tags %} class="{{ message.tags }}"{% endif %}>
              {{ message }}
            </div>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <div id="progress_bar" class="row">
      <div class="progress">
        <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:50%">
          <span class="sr-only">50% Complete</span>
        </div>
      </div>
    </div>

    <div id="dataform" class="row">
  		<form action="" method="POST" enctype="multipart/form-data" id="uploadform">
  			{% csrf_token %}
      	{{ form.as_p }}
        {% if data.show_buttons %}
        <div class="btn-group">
          <input class="btn btn-success" type="reset" value="Limpiar">
        	<input class="btn btn-primary" type="button" value="Enviar" id="mysubmit">
        </div>
        {% endif %}
  		</form>
    </div>



    {% if data.show_final_progress_bar%}
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Leidos</th>
          <th>Insertados</th>
          <th>Actualizados</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ data.read_lines }}</td>
          <td>{{ data.insert_lines }}</td>
          <td>{{ data.update_lines }}</td>
        </tr>
      </tbody>
    </table>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Empleados Insertados</th>
          <th>Empleados Existentes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ data.inserted_employees }}</td>
          <td>{{ data.existing_employees }}</td>
        </tr>
      </tbody>
    </table>
    <div id="final_progress_bar" class="row">
      <div class="progress">
        <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:100%">
          <span class="sr-only">50% Complete</span>
        </div>
      </div>
    </div>
    {% endif %}


	</div>
</div>

<script src = "{% static 'bower_components/jquery/dist/jquery.min.js' %}"></script>
<script type="text/javascript">
$(document).ready(function() {

  $('#progress_bar').hide();


});

$('#mysubmit').click(function(){
  //enable_patient_edit(); {# This seems weak and error prone #}
  console.log("test")
  $('#dataform').hide();
  $('#progress_bar').show();
  $('#uploadform').submit();
});

</script>

{% endblock %}