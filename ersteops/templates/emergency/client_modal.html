<!-- Modal -->
{% load widget_tweaks %}
<modal
  ref="modal"
  name="incident-modal"
  resizable
  scrollable
  width="75%"
  height="auto"
  @opened="open"
  @closed="destroy">

  <div>
    <div class="c-tabs">
      <nav class="c-tabs__list nav nav-tabs" id="modal-nav" role="tablist">
        <a
          v-for="{label, name} in tabs"
          v-on:click="toggle"
          :id="`nav-${name}-tab`"
          :href="`#nav-${name}`"
          class="c-tabs__link"
          :data-name="name"
          data-toggle="tab"
          role="tab"
          :aria-controls="`nav-${name}`">
            <% label %>
        </a>
        <div v-if="active !== 'search'" class="modal-buttons">
          <button
            @click="toggleActive"
            :class="{'c-btn': true, 'c-btn--success': !emergency.is_active, 'c-btn--danger': emergency.is_active}">
              <span v-if="emergency.is_active">Desactivar</span>
              <span v-else>Activar</span>
          </button>
          <button
            @click="submit"
            class="c-btn c-btn--info">
              Guardar Emergencia
          </button>
        </div>
      </nav>

      <div class="c-tabs__content tab-content" id="nav-tabContent">
        <!-- Search TAB -->
        <div class="c-tabs__pane active" id="nav-search" role="tabpanel" aria-labelledby="nav-search-tab">
          <search />
        </div><!-- End Search TAB -->

        <!-- Patient TAB -->
        <div class="c-tabs__pane" id="nav-patient" role="tabpanel" aria-labelledby="nav-patient-tab">
          <patient />
        </div><!-- End Patient TAB -->

        <!-- Address TAB -->
        <div class="c-tabs__pane" id="nav-address" role="tabpanel" aria-labelledby="nav-address-tab">
          <addresses />
        </div><!-- End Address TAB -->

        <div class="c-tabs__pane" id="nav-units" role="tabpanel" aria-labelledby="nav-units-tab">
          <div class="row">
            <div class="col-12">
              <div class="c-field">
                <label class="c-field__label" for="id_units">
                  Unidades
                </label>
                <select
                  {# v-model="" #}
                  name="units"
                  id="id_units"
                  class="c-input"
                >
                  <option value="" selected=""></option>
                  <option
                    v-for="unit in units"
                    value="{unit.pk}"
                  >
                    <% unit.fields.year %> <% unit.fields.model %>
                  </option>
                </select>
              </div>

              <br />
              <div class="c-field">
                <label class="c-field__label" for="id_is_active">
                  Es activa
                </label>
                <select
                  {# v-model="" #}
                  name="is_active"
                  id="id_is_active"
                  class="c-input"
                >
                  <option value="" selected=""></option>
                  <option value="2">SÃ­</option>
                  <option value="3">No</option>
                </select>
              </div>
            </div>
          </div>
        </div><!-- End Unit TAB -->
      </div>
    </div>
  </div>
</modal>
